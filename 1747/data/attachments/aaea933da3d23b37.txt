[32mINFO    [0m pytest_operator.plugin:plugin.py:806 Connecting to existing model github-pr-90351-microk8s:testing on unspecified cloud
[32mINFO    [0m juju.model:model.py:1994 Deploying ch:amd64/jammy/redis-k8s-42
[32mINFO    [0m juju.model:model.py:1994 Deploying ch:amd64/jammy/redis-k8s-42
[32mINFO    [0m juju.model:model.py:1994 Deploying ch:amd64/focal/nginx-ingress-integrator-133
[32mINFO    [0m juju.model:model.py:1994 Deploying ch:amd64/jammy/postgresql-k8s-717
[32mINFO    [0m juju.model:model.py:1994 Deploying local:focal/indico-0
[32mINFO    [0m juju.model:model.py:2631 Waiting for model:
  indico/0 [allocating] waiting: installing agent
  postgresql-k8s/0 [allocating] waiting: installing agent
  redis-broker/0 [allocating] waiting: installing agent
  redis-cache/0 [allocating] waiting: installing agent
  nginx-ingress-integrator/0 [allocating] waiting: installing agent
[32mINFO    [0m juju.model:model.py:2631 Waiting for model:
  indico/0 [executing] maintenance: installing charm software
  postgresql-k8s/0 [allocating] waiting: installing agent
  redis-broker/0 [allocating] waiting: agent initializing
  redis-cache/0 [allocating] waiting: agent initializing
  nginx-ingress-integrator/0 [executing] maintenance: installing charm software
[32mINFO    [0m juju.model:model.py:2631 Waiting for model:
  indico/0 [executing] waiting: Waiting for database availability
  postgresql-k8s/0 [executing] maintenance: installing charm software
  redis-broker/0 [executing] active: 
  redis-cache/0 [executing] active: 
  nginx-ingress-integrator/0 [idle] waiting: Waiting for ingress IP availability
[32mINFO    [0m juju.model:model.py:2631 Waiting for model:
  indico/0 [idle] waiting: Waiting for database availability
  postgresql-k8s/0 [executing] waiting: awaiting for cluster to start
  nginx-ingress-integrator/0 [idle] waiting: Waiting for ingress IP availability
[32mINFO    [0m juju.model:model.py:2631 Waiting for model:
  indico/0 [idle] maintenance: Starting indico-nginx container
  postgresql-k8s/0 [idle] active: Primary
  nginx-ingress-integrator/0 [idle] waiting: Waiting for ingress IP availability
[32mINFO    [0m juju.model:model.py:2631 Waiting for model:
  nginx-ingress-integrator/0 [idle] active: 
[32mINFO    [0m juju.model:model.py:1994 Deploying ch:amd64/jammy/saml-integrator-66
[32mINFO    [0m juju.model:model.py:2631 Waiting for model:
  saml-integrator/0 [allocating] waiting: installing agent
  indico/0 [idle] active: 
[32mINFO    [0m juju.model:model.py:2631 Waiting for model:
  saml-integrator/0 [idle] active: 
  indico/0 [idle] active:
[32mINFO    [0m juju.model:model.py:2631 Waiting for model:
  redis-broker/0 [idle] active: 
  redis-cache/0 [idle] active: 
  nginx-ingress-integrator/0 [idle] active: 
  postgresql-k8s/0 [idle] active: Primary
  indico/0 [idle] active: 
  saml-integrator/0 [idle] active: 
[32mINFO    [0m juju.model:model.py:2631 Waiting for model:
  nginx-ingress-integrator/0 [executing] waiting: Waiting for ingress IP availability
  indico/0 [idle] active: 
[32mINFO    [0m juju.model:model.py:2631 Waiting for model:
  nginx-ingress-integrator/0 [executing] waiting: Waiting for ingress IP availability
[32mINFO    [0m juju.model:model.py:2631 Waiting for model:
  nginx-ingress-integrator/0 [executing] waiting: Waiting for ingress IP availability
[32mINFO    [0m juju.model:model.py:2631 Waiting for model:
  nginx-ingress-integrator/0 [executing] waiting: Waiting for ingress IP availability
[32mINFO    [0m pytest_operator.plugin:plugin.py:951 Model status:

Model    Controller                Cloud/Region        Version  SLA          Timestamp
testing  github-pr-90351-microk8s  microk8s/localhost  2.9.53   unsupported  15:19:12Z

App                       Version  Status  Scale  Charm                     Channel        Rev  Address         Exposed  Message
indico                    3.3.9    active      1  indico                                     0  10.152.183.184  no       
nginx-ingress-integrator  24.2.0   active      1  nginx-ingress-integrator  latest/edge    133  10.152.183.205  no       
postgresql-k8s            14.20    active      1  postgresql-k8s            14/edge        717  10.152.183.93   no       
redis-broker              7.2.5    active      1  redis-k8s                 latest/edge     42  10.152.183.20   no       
redis-cache               7.2.5    active      1  redis-k8s                 latest/edge     42  10.152.183.137  no       
saml-integrator                    active      1  saml-integrator           latest/stable   66  10.152.183.197  no       

Unit                         Workload  Agent  Address      Ports  Message
indico/0*                    active    idle   10.1.12.145         
nginx-ingress-integrator/0*  active    idle   10.1.12.142         
postgresql-k8s/0*            active    idle   10.1.12.149         Primary
redis-broker/0*              active    idle   10.1.12.144         
redis-cache/0*               active    idle   10.1.12.148         
saml-integrator/0*           active    idle   10.1.12.150         


[32mINFO    [0m pytest_operator.plugin:plugin.py:957 Juju error logs:


[32mINFO    [0m pytest_operator.plugin:plugin.py:1039 Forgetting model main...
[1m[31mERROR   [0m websockets.client:protocol.py:1009 data transfer failed
Traceback (most recent call last):
  File "/home/runner/work/indico-operator/indico-operator/.tox/integration/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 953, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/indico-operator/indico-operator/.tox/integration/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 1023, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/indico-operator/indico-operator/.tox/integration/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 1098, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/work/indico-operator/indico-operator/.tox/integration/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 1155, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
  File "/home/runner/work/indico-operator/indico-operator/.tox/integration/lib/python3.12/site-packages/websockets/legacy/framing.py", line 70, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/streams.py", line 752, in readexactly
    await self._wait_for_data('readexactly')
  File "/usr/lib/python3.12/asyncio/streams.py", line 545, in _wait_for_data
    await self._waiter
  File "/usr/lib/python3.12/asyncio/selector_events.py", line 1075, in write
    n = self._sock.send(data)
        ^^^^^^^^^^^^^^^^^^^^^
OSError: [Errno 9] Bad file descriptor
[33mWARNING [0m juju.client.connection:connection.py:543 Receiver: Connection closed, reconnecting